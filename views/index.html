<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="../assets/bootstrap.min.css">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
  <meta http-equiv="Pragma" content="no-cache"/>
  <meta http-equiv="Expires" content="0"/>
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	<script type="text/javascript" src="../node_modules/androidjs/lib/androidjs.js"></script>
</head>

<style>
	.app{
		font-size:30px;
	}
</style>

<body class="bg-dark text-light" style="min-height:100vh;">
<!-- Wheelpoint Ride Tracker UI -->
<div id="app" class="py-4" style="min-height:100vh;">
  <div class="row mb-3">
    <div class="col-12 text-center">
      <h3 class="fw-bold app-title animate-title" style="color:#00bcd4;">Wheelpoint</h3>
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-12 text-center">
      <div id="speedometer-container" class="mx-auto mb-2" style="width:200px;height:200px;position:relative;display:inline-block;">
        <svg id="speedometer-svg" width="200" height="200" viewBox="0 0 200 200">
          <circle cx="100" cy="100" r="85" stroke="#222" stroke-width="16" fill="none"/>
          <circle id="speedometer-fill" cx="100" cy="100" r="85" stroke="#00e6ff" stroke-width="16" fill="none" stroke-linecap="round" stroke-dasharray="534" stroke-dashoffset="534"/>
        </svg>
        <div id="speed-value" style="position:absolute;top:30%;transform:translate(-50%,-50%);font-size:3.2rem;font-weight:700;color:#00e6ff;pointer-events:none;width:100%;text-align:center;line-height:1;">
          0
        </div>
        <div id="unit-toggle" class="unit-toggle-circle d-flex align-items-center justify-content-center" style="position:absolute;bottom:18px;left:50%;transform:translateX(-50%);width:64px;height:64px;border-radius:50%;background:#181a1b;border:3px solid #00bcd4;box-shadow:0 2px 8px #0006;cursor:pointer;transition:background 0.2s;">
          <span id="unit-label" style="font-size:1.3rem;color:#00bcd4;font-weight:600;">mph</span>
        </div>
      </div>
      <!-- Switch Transportation -->
      <div class="mt-3">
        <span id="transport-switch" class="transport-switch clickable fw-semibold" style="color:#00bcd4;cursor:pointer;font-size:1.2rem;">
          <i class="bi bi-bicycle"></i> Bicycle
        </span>
      </div>
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-12 position-relative">
      <!-- OpenStreetMap -->
      <div class="map border-0 shadow mb-2 overflow-hidden position-relative" style="height:260px;width:100%;background:#181a1b;margin-left:5px;margin-right:5px;">
        <div id="osm-map" style="width:100%;height:100%;border-radius:2rem;"></div>
      </div>
      <!-- Live Stats -->
      <div class="stats d-flex justify-content-around bg-gradient-dark py-2 mb-2 shadow-sm" style="border-radius:2rem;">
        <div class="stat-block text-center">
          <small class="stat-label">Distance</small><br>
          <strong class="stat-value" id="stat-distance">0.00 <span class="unit">mi</span></strong>
        </div>
        <div class="stat-block text-center">
          <small class="stat-label">Duration</small><br>
          <strong class="stat-value" id="stat-duration">00:00:00</strong>
        </div>
        <div class="stat-block text-center">
          <small class="stat-label">Avg Speed</small><br>
          <strong class="stat-value" id="stat-avg">0.00 <span class="unit">mph</span></strong>
        </div>
      </div>
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-12 text-center">
      <!-- Start/Stop Button -->
      <button class="btn btn-success btn-lg rounded-pill px-5 fw-bold shadow" id="start-btn">Start Ride</button>
      <button class="btn btn-danger btn-lg rounded-pill px-5 fw-bold shadow" id="stop-btn" style="display:none;">Stop Ride</button>
    </div>
  </div>
  <!-- End Ride Menu Modal -->
  <div class="modal fade" id="endRideModal" tabindex="-1" role="dialog" aria-labelledby="endRideModalLabel" aria-hidden="true">
    <div class="modal-dialog d-flex align-items-center justify-content-center min-vh-100" role="document" style="min-height:100vh;">
      <div class="modal-content bg-dark text-light rounded-4 border-0 p-0" style="box-shadow:none;min-width:340px;max-width:400px;margin:auto;">
        <div class="modal-header border-0 d-none"></div>
        <div class="modal-body d-flex flex-column align-items-center justify-content-center" style="padding:2.2rem 1.2rem 1.2rem 1.2rem;">
          <div class="map border-0 rounded-4 mb-3 overflow-hidden" style="height:180px;width:100%;max-width:340px;position:relative;">
            <div id="summary-map" style="width:100%;height:100%;"></div>
          </div>
          <ul class="list-group bg-transparent w-100 mb-3" style="max-width:340px;">
            <strong><li class="list-group-item bg-dark text-light border-secondary rounded-3 mb-2 text-center">Distance: <span class="fw-semibold" id="summary-distance">0.00 mi</span></li></strong>
            <strong><li class="list-group-item bg-dark text-light border-secondary rounded-3 text-center">Transport: <span class="fw-semibold" id="summary-transport">Bicycle</span></li></strong>
            <strong><li class="list-group-item bg-dark text-light border-secondary rounded-3 mb-2 text-center">Duration: <span class="fw-semibold" id="summary-duration">00:00:00</span></li></strong>
            <strong><li class="list-group-item bg-dark text-light border-secondary rounded-3 mb-2 text-center">Avg Speed: <span class="fw-semibold" id="summary-avg">0.00 mph</span></li></strong>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="../assets/jquery-3.3.1.slim.min.js"></script>
<script src="../assets/popper.min.js"></script>
<script src="../assets/bootstrap.min.js"></script>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script>
// --- State ---
const transportTypes = [
  {name:'Walk', icon:'<i class="bi bi-person-walking"></i>', max:8},
  {name:'Bicycle', icon:'<i class="bi bi-bicycle"></i>', max:40},
  {name:'Motorcycle', icon:'<i class="bi bi-bicycle"></i>', max:120},
  {name:'Car', icon:'<i class="bi bi-car-front"></i>', max:180}
];
let transportIdx = 1;
let rideActive = false;
let timer = null;
let elapsed = 0;
let distance = 0;
let avgSpeed = 0;
let speed = 0;
let watchId = null;
let pathCoords = [];
let marker = null;
let pathLine = null;
let map, summaryMap;
let unit = 'mph';
let unitFactor = 0.621371;

// --- Speedometer Animation ---
function animateSpeedometer(val, max, duration=400, initial=false) {
  const fill = document.getElementById('speedometer-fill');
  const speedVal = document.getElementById('speed-value');
  const start = initial ? 0 : (parseFloat(speedVal.textContent)||0);
  const end = val;
  const circ = 2 * Math.PI * 85;
  let startTime = null;
  function animate(ts) {
    if (!startTime) startTime = ts;
    const progress = Math.min((ts-startTime)/duration,1);
    const current = start + (end-start)*progress;
    speedVal.textContent = current.toFixed(1);
    const percent = Math.min(current/max,1);
    fill.setAttribute('stroke-dashoffset', circ * (1-percent));
    // Color by speed
    let color = '#00e6ff';
    if (percent > 0.8) color = '#ff3b30';
    else if (percent > 0.6) color = '#ff9800';
    else if (percent > 0.3) color = '#00e676';
    fill.setAttribute('stroke', color);
    if (progress < 1) requestAnimationFrame(animate);
  }
  requestAnimationFrame(animate);
}

document.addEventListener('DOMContentLoaded', function() {
  const unitToggle = document.getElementById('unit-toggle');
  const unitLabel = document.getElementById('unit-label');
  unitToggle.addEventListener('click', function() {
    if (unit === 'mph') {
      unit = 'km/h';
      unitLabel.textContent = 'km/h';
      unitFactor = 1;
    } else {
      unit = 'mph';
      unitLabel.textContent = 'mph';
      unitFactor = 0.621371;
    }
    updateStatsUI();
    animateSpeedometer(speed*unitFactor, transportTypes[transportIdx].max*unitFactor);
  });

  // --- Transport Switch ---
  const transportSwitch = document.getElementById('transport-switch');
  function updateTransportUI() {
    transportSwitch.innerHTML = transportTypes[transportIdx].icon + ' ' + transportTypes[transportIdx].name;
    document.getElementById('summary-transport').textContent = transportTypes[transportIdx].name;
    animateSpeedometer(speed*unitFactor, transportTypes[transportIdx].max*unitFactor);
  }
  transportSwitch.addEventListener('click', function() {
    transportIdx = (transportIdx + 1) % transportTypes.length;
    updateTransportUI();
  });
  updateTransportUI();

  map = L.map('osm-map', {
    zoomControl: true,
    attributionControl: false,
    center: [0, 0],
    zoom: 14,
    dragging: true,
    scrollWheelZoom: false,
    doubleClickZoom: false,
    boxZoom: false,
    keyboard: false,
    tap: false,
    touchZoom: true
  });
  const darkTiles = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
    attribution: '',
    subdomains: 'abcd',
    maxZoom: 19
  });
  darkTiles.addTo(map);
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(pos => {
      const latlng = [pos.coords.latitude, pos.coords.longitude];
      map.setView(latlng, 16);
      if (!marker) {
        marker = L.marker(latlng).addTo(map);
      } else {
        marker.setLatLng(latlng);
      }
    }, err => {
      alert('Location permission denied or unavailable. Please enable location services for full functionality.');
    }, { enableHighAccuracy: true, maximumAge: 1000, timeout: 10000 });
  } else {
    alert('Geolocation is not supported by your browser.');
  }

  function animateStat(id, from, to, unit, duration=400) {
    const el = document.getElementById(id);
    let startTime = null;
    function animate(ts) {
      if (!startTime) startTime = ts;
      const progress = Math.min((ts-startTime)/duration,1);
      const val = from + (to-from)*progress;
      el.innerHTML = val.toFixed(2) + (unit ? ' <span class="unit">'+unit+'</span>' : '');
      if (progress < 1) requestAnimationFrame(animate);
    }
    requestAnimationFrame(animate);
  }

  function formatDuration(seconds) {
    const h = Math.floor(seconds / 3600).toString().padStart(2, '0');
    const m = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
    const s = Math.floor(seconds % 60).toString().padStart(2, '0');
    return `${h}:${m}:${s}`;
  }

  function calcDistance(coords) {
    let d = 0;
    for (let i = 1; i < coords.length; i++) {
      d += map.distance(coords[i-1], coords[i]);
    }
    return d / 1000;
  }

  function calcAvgSpeed(distance, duration) {
    if (duration === 0) return 0;
    return distance / (duration / 3600); // km/h
  }

  // --- Path Color by Speed ---
  function getPathColor(speed, max) {
    const percent = speed/max;
    if (percent > 0.8) return '#ff3b30'; // red
    if (percent > 0.6) return '#ff9800'; // orange
    if (percent > 0.3) return '#00e676'; // green
    return '#00e6ff'; // cyan
  }

  // --- Stats UI ---
  function updateStatsUI() {
    animateStat('stat-distance', parseFloat(document.getElementById('stat-distance').textContent)||0, distance*unitFactor, unit, 400);
    document.getElementById('stat-duration').textContent = formatDuration(elapsed);
    animateStat('stat-avg', parseFloat(document.getElementById('stat-avg').textContent)||0, avgSpeed*unitFactor, unit, 400);
    animateSpeedometer(speed*unitFactor, transportTypes[transportIdx].max*unitFactor);
  }

  // --- Ride Control ---
  const startBtn = document.getElementById('start-btn');
  const stopBtn = document.getElementById('stop-btn');
  function startRide() {
    rideActive = true;
    elapsed = 0;
    distance = 0;
    avgSpeed = 0;
    speed = 0;
    pathCoords = [];
    if (pathLine) { map.removeLayer(pathLine); pathLine = null; }
    if (marker) { map.removeLayer(marker); marker = null; }
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(pos => {
        const latlng = [pos.coords.latitude, pos.coords.longitude];
        map.setView(latlng, 16);
        marker = L.marker(latlng).addTo(map);
      });
    }
    timer = setInterval(() => {
      elapsed++;
      avgSpeed = calcAvgSpeed(distance, elapsed).toFixed(2);
      updateStatsUI();
    }, 1000);
    if (navigator.geolocation) {
      watchId = navigator.geolocation.watchPosition(pos => {
        const latlng = [pos.coords.latitude, pos.coords.longitude];
        pathCoords.push(latlng);
        if (!marker) {
          marker = L.marker(latlng).addTo(map);
          map.setView(latlng, 16);
        } else {
          marker.setLatLng(latlng);
          map.setView(latlng, 16);
        }
        if (pathCoords.length > 1) {
          if (pathLine) map.removeLayer(pathLine);
          // Draw colored segments
          let segments = [];
          for (let i=1; i<pathCoords.length; i++) {
            const seg = L.polyline([pathCoords[i-1], pathCoords[i]], {
              color: getPathColor(pos.coords.speed ? pos.coords.speed*3.6*unitFactor : 0, transportTypes[transportIdx].max*unitFactor),
              weight: 5
            }).addTo(map);
            segments.push(seg);
          }
          pathLine = L.layerGroup(segments);
          pathLine.addTo(map);
          distance = calcDistance(pathCoords).toFixed(2);
          speed = pos.coords.speed ? (pos.coords.speed * 3.6) : speed;
        }
        updateStatsUI();
      }, err => {
        alert('Location permission denied or unavailable.');
      }, { enableHighAccuracy: true, maximumAge: 1000, timeout: 10000 });
    }
    startBtn.style.display = 'none';
    stopBtn.style.display = '';
  }
  function stopRide() {
    rideActive = false;
    clearInterval(timer);
    if (navigator.geolocation && watchId) {
      navigator.geolocation.clearWatch(watchId);
    }
    startBtn.style.display = '';
    stopBtn.style.display = 'none';
    // Show modal with summary
    document.getElementById('summary-distance').textContent = (distance*unitFactor).toFixed(2) + ' ' + unit;
    document.getElementById('summary-duration').textContent = formatDuration(elapsed);
    document.getElementById('summary-avg').textContent = (avgSpeed*unitFactor).toFixed(2) + ' ' + unit;
    document.getElementById('summary-transport').textContent = transportTypes[transportIdx].name;
    $('#endRideModal').modal('show');
    // Animate stats in modal
    animateStat('summary-distance', 0, distance*unitFactor, unit, 700);
    animateStat('summary-avg', 0, avgSpeed*unitFactor, unit, 700);
    // Show summary map
    setTimeout(() => {
      if (summaryMap) summaryMap.remove();
      summaryMap = L.map('summary-map', {
        zoomControl: false,
        attributionControl: false,
        dragging: false,
        scrollWheelZoom: false,
        doubleClickZoom: false,
        boxZoom: false,
        keyboard: false,
        tap: false,
        touchZoom: false
      });
      darkTiles.addTo(summaryMap);
      if (pathCoords.length > 1) {
        let bounds = L.latLngBounds(pathCoords);
        summaryMap.fitBounds(bounds.pad(0.2));
        let segments = [];
        for (let i=1; i<pathCoords.length; i++) {
          const seg = L.polyline([pathCoords[i-1], pathCoords[i]], {
            color: getPathColor(speed*unitFactor, transportTypes[transportIdx].max*unitFactor),
            weight: 5
          }).addTo(summaryMap);
          segments.push(seg);
        }
      }
    }, 400);
  }
  startBtn.addEventListener('click', startRide);
  stopBtn.addEventListener('click', stopRide);
  // Modal close
  document.getElementById('closeEndMenu').onclick = function() { $('#endRideModal').modal('hide'); };
  document.getElementById('closeEndMenu2').onclick = function() { $('#endRideModal').modal('hide'); };
  // Initial UI
  updateStatsUI();
  animateSpeedometer(0, transportTypes[transportIdx].max*unitFactor);
  // Cool speedometer load animation
  setTimeout(() => {
    const fill = document.getElementById('speedometer-fill');
    const circ = 2 * Math.PI * 85;
    fill.setAttribute('stroke-dashoffset', circ);
    fill.setAttribute('stroke', '#00e6ff');
    animateSpeedometer(transportTypes[transportIdx].max*unitFactor*0.85, transportTypes[transportIdx].max*unitFactor, 900, true);
    setTimeout(() => {
      animateSpeedometer(0, transportTypes[transportIdx].max*unitFactor, 700, true);
    }, 950);
  }, 350);
});
</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
<style type="text/css">
  html, body {
    height: 100%;
    background: linear-gradient(135deg, #232a34 0%, #283842 100%) !important;
    color: #e0e0e0 !important;
    font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
    overflow-x: hidden;
  }
  ::-webkit-scrollbar {
    display: none;
  }
  #app {
    background: #181a1b !important;
    min-height: 100vh;
    width: 100vw;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    animation: appFadeIn 1.2s cubic-bezier(.4,0,.2,1);
  }
  @keyframes appFadeIn {
    from { opacity: 0; transform: translateY(40px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .app-title.animate-title {
    animation: titlePop 1.2s cubic-bezier(.4,0,.2,1) 0.1s both;
    letter-spacing: 2px;
    font-size: 2.6rem;
    color: #00bcd4;
    text-shadow: 0 2px 16px #00e6ff44, 0 2px 8px #0008;
    font-weight: bold;
    background: linear-gradient(90deg, #00e6ff 0%, #00bcd4 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  @keyframes titlePop {
    0% { opacity: 0; transform: scale(0.7) translateY(-30px); }
    60% { opacity: 1; transform: scale(1.1) translateY(8px); }
    100% { opacity: 1; transform: scale(1) translateY(0); }
  }
  #speedometer-container {
    background: none;
    border-radius: 50%;
    box-shadow: 0 4px 32px #00e6ff22, 0 2px 16px #0006;
    margin-bottom: 0.5rem;
    transition: box-shadow 0.3s cubic-bezier(.4,0,.2,1);
    animation: popIn 1.1s cubic-bezier(.4,0,.2,1) 0.2s both;
  }
  @keyframes popIn {
    0% { opacity: 0; transform: scale(0.7); }
    80% { opacity: 1; transform: scale(1.08); }
    100% { opacity: 1; transform: scale(1); }
  }
  #speedometer-svg {
    display: block;
    margin: 0 auto;
  }
  #speed-value {
    font-size: 3.2rem;
    font-weight: 700;
    color: #00e6ff;
    text-shadow: 0 2px 16px #00e6ff44, 0 2px 8px #0008;
    letter-spacing: 1px;
    transition: color 0.3s;
    animation: statPop 1.1s cubic-bezier(.4,0,.2,1) 0.3s both;
  }
  .unit-toggle-circle {
    border-radius: 50%;
    background: #181a1b;
    border: 3px solid #00bcd4;
    box-shadow: 0 2px 8px #0006;
    font-size: 1.3rem;
    color: #00bcd4;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s, border 0.2s, color 0.2s, box-shadow 0.2s;
    user-select: none;
    will-change: background, border, color, box-shadow;
    animation: fadeIn 1.2s cubic-bezier(.4,0,.2,1) 0.4s both;
  }
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  .transport-switch {
    font-size: 1.2rem;
    border-radius: 2rem !important;
    padding: 0.5rem 1.4rem;
    margin-top: 0.5rem;
    background: #181a1b;
    color: #1e2a2c;
    border: 1.5px solid #00bcd4;
    transition: background 0.2s, color 0.2s, box-shadow 0.2s;
    box-shadow: 0 2px 8px #00e6ff22;
    animation: fadeIn 1.2s cubic-bezier(.4,0,.2,1) 0.5s both;
  }
  .transport-switch.clickable:hover {
    text-decoration: none;
    color: #00e6ff;
    background: #232a34;
    box-shadow: 0 4px 16px #00e6ff44;
  }
  .map {
    background: #181a1b;
    border-radius: 2rem !important;
    min-height: 200px;
    box-shadow: 0 2px 16px #00e6ff22, 0 2px 16px #0006;
    position: relative;
    width: 100%;
    margin-left:0px;
    margin-right:0px;
    animation: fadeIn 1.2s cubic-bezier(.4,0,.2,1) 0.6s both;
  }
  .align-location-btn {
    background: #00bcd4 !important;
    color: #181a1b !important;
    border: none;
    box-shadow: 0 2px 8px #0006;
    transition: background 0.2s, box-shadow 0.2s;
    outline: none;
    z-index: 1000;
  }
  .align-location-btn:active, .align-location-btn:focus {
    background: #00e6ff !important;
    box-shadow: 0 4px 16px #00e6ff44;
  }
  .stats {
    background: linear-gradient(90deg, #181a1b 80%, #181a1b 100%);
    border-radius: 2rem;
    box-shadow: 0 2px 8px #00e6ff22, 0 2px 8px #0004;
    color: #e0e0e0;
    margin-top: 0.5rem;
    animation: fadeIn 1.2s cubic-bezier(.4,0,.2,1) 0.7s both;
  }
  .stat-block {
    min-width: 90px;
    padding: 0.5rem 0.2rem;
    margin: 5px;
    animation: statPop 1.1s cubic-bezier(.4,0,.2,1) 0.8s both;
  }
  @keyframes statPop {
    0% { opacity: 0; transform: scale(0.7); }
    80% { opacity: 1; transform: scale(1.08); }
    100% { opacity: 1; transform: scale(1); }
  }
  .stat-label {
    color: #00bcd4;
    font-size: 1.05rem;
    letter-spacing: 0.5px;
    font-weight: 600;
  }
  .stat-value {
    font-size: 1.45rem;
    color: #ffffff;
    font-weight: 600;
    transition: color 0.3s;
  }
  .btn-lg {
    font-size: 1.3rem;
    border-radius: 2rem !important;
    padding: 0.7rem 2.5rem;
    margin-top: 0.5rem;
    box-shadow: 0 2px 8px #00e6ff22, 0 2px 8px #0004;
    animation: fadeIn 1.2s cubic-bezier(.4,0,.2,1) 0.9s both;
  }
  .modal-content {
    background: #283842 !important;
    color: #e0e0e0;
    border-radius: 2rem !important;
    box-shadow: none !important;
    margin: auto;
    min-width: 340px;
    animation: fadeIn 1.2s cubic-bezier(.4,0,.2,1) 1.1s both;
  }
  .modal-body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 320px;
    padding: 2.2rem 1.2rem 1.2rem 1.2rem;
  }
  .list-group-item {
    background: #283842 !important;
    color: #e0e0e0;
    border-radius: 1rem !important;
    margin-bottom: 0.5rem;
    font-size: 1.1rem;
    text-align: center;
    animation: fadeIn 1.2s cubic-bezier(.4,0,.2,1) 1.2s both;
  }
  .btn-info {
    background: #00bcd4 !important;
    color: #23272b !important;
    border-radius: 2rem !important;
    font-weight: 600;
    box-shadow: 0 2px 8px #00e6ff22;
    transition: background 0.2s, color 0.2s, box-shadow 0.2s;
    animation: fadeIn 1.2s cubic-bezier(.4,0,.2,1) 1.3s both;
  }
  .btn-info:hover {
    background: #0097a7 !important;
    color: #fff !important;
    box-shadow: 0 4px 16px #00e6ff44;
  }
  .btn-close-white {
    display: none !important;
  }
  .leaflet-control-attribution, .leaflet-control-scale {
    display: none !important;
  }
  .leaflet-container {
    background: #283842 !important;
    border-radius: 2rem !important;
  }
</style>
<script type="text/javascript">
	function toggle_popover() {
		$('#popover').popover('toggle')
	}
</script>
</body>

</html>